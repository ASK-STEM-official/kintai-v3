# 部活動勤怠管理システム 企画書

## アジェンダ

- 提案の対象となる想定ペルソナ
- 提案の背景となる現状認識
- 提案の主題
- 提案への解決策
- 期待される効果について
- システム概要
- 費用・スケジュール概要
- 体制図・関係者

## 提案の対象となる想定ペルソナ

- **部活動責任者・顧問の先生方**：出席管理の効率化を求める教職員
- **部活動メンバー（100名以下）**：簡単で確実な出退勤記録を求める学生
- **学校管理者**：セキュリティに配慮した勤怠管理システムを求める決裁者

## 提案の背景となる現状認識

### 事実1：既存システムの限界
- Firebaseを利用した勤怠管理システムが、分析時の大量トラフィックにより読み取り上限に達している
- データ分析や集計処理時にシステムが不安定になり、運用に支障をきたしている

### 事実2：学校ネットワーク制約
- 学校施設のネットワークセキュリティ上、オンプレミサーバーの設置が困難
- 既存のネットワークインフラに影響を与えない構成が必要

### 事実3：運用コスト制約
- 部活動運営予算が限られており、システム運用に追加費用をかけられない
- 無料プランでの継続運用が必須条件

### 事実4：ユーザー登録の煩雑さ
- 従来の手動登録プロセスが管理者の負担となっている
- セキュアかつ簡単な新規ユーザー登録方式が求められている

## 提案の主題

**QRコード登録機能付き、無料クラウドサービスを活用した安全で高性能な部活動勤怠管理システムへの移行**

## 提案への解決策

### システム構成
1. **打刻環境**：ラズベリーパイ1台 + HIDキーボード対応NFC/RFIDリーダー
2. **データベース**：Supabase（PostgreSQL）無料プラン
3. **フロントエンド**：Next.js + Vercel無料プラン
4. **認証**：Discord OAuth + Supabase Auth連携
5. **登録システム**：QRコード方式による簡単登録機能

### 革新的な業務フロー

#### 日常的な打刻フロー
1. メンバーがカードをリーダーにタッチ
2. カードIDがブラウザに自動入力され、出退勤を自動記録（3秒以内）
3. Discord認証でWebサイトにログインし、個人の勤怠状況を確認
4. 管理者は班・学年別の集計データをカレンダー形式で閲覧

#### 新規登録フロー（新機能）
1. Kiosk画面で「/」キーを押下し登録モードを開始
2. 新しいカードをタッチしてQRコードを生成・表示
3. スマートフォンでQRコードを読み取り
4. Discord OAuth認証で期生ロール確認
5. 自動的に本登録が完了し、即座にカード使用可能

## 期待される効果について

### 定量的効果
- **データ処理性能向上**：PostgreSQLにより分析処理時のトラフィック制限を解消
- **運用コスト削減**：月額0円での継続運用（現状維持）
- **処理速度改善**：カードタッチから記録完了まで3秒以内
- **登録時間短縮**：従来の手動登録から30分以内の自動登録へ短縮

### 定性的効果
- **安全性向上**：オンプレサーバー不要でネットワークセキュリティリスク軽減
- **拡張性確保**：班・学年別集計など新機能の追加が容易
- **運用負荷軽減**：自動バックアップ・メンテナンスフリー・QRコード自動登録
- **ユーザビリティ向上**：直感的なQRコード登録による管理者負担軽減

## システム概要

### アーキテクチャ
```
[NFC/RFIDカード] → [ラズベリーパイ + リーダー] → [Kiosk Webブラウザ]
                                                      ↓
                    [QRコード表示] ← [Next.js Frontend] ← [Supabase API]
                           ↓                                ↓
[スマートフォン] → [QR読取・Discord OAuth] → [PostgreSQL DB]
```

### 主要機能
- カードタッチによる自動出退勤記録
- **QRコードによる簡単カード登録システム**
- Discord OAuth認証による安全なアクセス制御
- 個人勤怠状況の閲覧（全メンバー）
- 班・学年別集計表示（管理者のみ）
- **リアルタイムお知らせ表示機能**
- 既存Firebaseデータの完全移行

### 技術的革新点
- HIDキーボード入力によるシームレスなカード読取
- QRコード読取検知による自動画面復帰機能
- Supabase Realtimeによるお知らせの即座更新
- マテリアライズドビューによる高速データ集計

## 費用・スケジュール概要

### 費用
- **初期費用**：0円
- **月額運用費**：0円
- **必要機材**：既存のラズベリーパイとNFC/RFIDリーダーを流用

### スケジュール
- **Phase 1**（1-2週間）：Supabase環境構築・データ移行・基本機能実装
- **Phase 2**（2-3週間）：Next.jsアプリケーション開発・QRコード登録機能実装・Discord OAuth連携
- **Phase 3**（1週間）：リアルタイム機能・集計機能・テスト運用
- **Phase 4**（1週間）：本格稼働・旧システム停止・運用監視開始

## 体制図・関係者

### 開発担当
- **システム開発者**：設計・実装・テスト・QRコード登録機能開発
- **部活動責任者**：要件確認・受入テスト・登録フロー検証

### 運用担当
- **管理者権限者**：全体データ管理・ユーザー権限設定・お知らせ管理
- **一般メンバー**：日常的な出退勤操作・個人データ確認・セルフ登録

### 技術サポート
- **Supabase**：データベース・認証基盤・リアルタイム機能
- **Vercel**：Webアプリケーションホスティング・自動デプロイ
- **Discord**：OAuth認証プロバイダー・期生ロール管理

### 新機能による価値提案
本企画により、従来の課題であった手動登録作業が完全自動化され、QRコードという現代的で直感的なインターフェースにより、部活動メンバーが自分でカード登録を完了できる革新的なシステムを実現します。これにより管理者の作業負荷を大幅に軽減しつつ、セキュリティを向上させた持続可能な勤怠管理システムを構築できます。[1][2][3]
